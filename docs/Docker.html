<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | 金金金的宝藏</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.0.0-rc.34">
    <link rel="preload stylesheet" href="/ProjectConstructionBlog/assets/style.-mudt_dX.css" as="style">
    
    <script type="module" src="/ProjectConstructionBlog/assets/app.QxjfDMXf.js"></script>
    <link rel="preload" href="/ProjectConstructionBlog/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/ProjectConstructionBlog/assets/chunks/framework.R8BlnE1E.js">
    <link rel="modulepreload" href="/ProjectConstructionBlog/assets/chunks/theme.XsUrTMKV.js">
    <link rel="modulepreload" href="/ProjectConstructionBlog/assets/docs_Docker.md.CvS5TRpK.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c61a2575><!--[--><!--]--><!--[--><span tabindex="-1" data-v-05e04027></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-05e04027> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c61a2575 data-v-4d924ce7><div class="VPNavBar has-sidebar" data-v-4d924ce7 data-v-0147e35f><div class="wrapper" data-v-0147e35f><div class="container" data-v-0147e35f><div class="title" data-v-0147e35f><div class="VPNavBarTitle has-sidebar" data-v-0147e35f data-v-e7d2b247><a class="title" href="/ProjectConstructionBlog/" data-v-e7d2b247><!--[--><!--]--><!----><!--[-->金金金的宝藏<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-0147e35f><div class="content-body" data-v-0147e35f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-0147e35f><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-0147e35f data-v-e89fcb04><span id="main-nav-aria-label" class="visually-hidden" data-v-e89fcb04>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/ProjectConstructionBlog/docs/Docker.html" tabindex="0" data-v-e89fcb04 data-v-4e54f23c><!--[--><span data-v-4e54f23c>文档</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-0147e35f data-v-d6369c37><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d6369c37 data-v-70daadbf data-v-b497e74e><span class="check" data-v-b497e74e><span class="icon" data-v-b497e74e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-70daadbf><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-70daadbf><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-0147e35f data-v-66999c76 data-v-2e15231f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Yjx710" aria-label="github" target="_blank" rel="noopener" data-v-2e15231f data-v-2a6f3a7d><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-0147e35f data-v-70285e04 data-v-45e0c48d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-45e0c48d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-45e0c48d><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-45e0c48d><div class="VPMenu" data-v-45e0c48d data-v-e1b8de1b><!----><!--[--><!--[--><!----><div class="group" data-v-70285e04><div class="item appearance" data-v-70285e04><p class="label" data-v-70285e04>Appearance</p><div class="appearance-action" data-v-70285e04><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-70285e04 data-v-70daadbf data-v-b497e74e><span class="check" data-v-b497e74e><span class="icon" data-v-b497e74e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-70daadbf><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-70daadbf><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-70285e04><div class="item social-links" data-v-70285e04><div class="VPSocialLinks social-links-list" data-v-70285e04 data-v-2e15231f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Yjx710" aria-label="github" target="_blank" rel="noopener" data-v-2e15231f data-v-2a6f3a7d><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-0147e35f data-v-0a207dfb><span class="container" data-v-0a207dfb><span class="top" data-v-0a207dfb></span><span class="middle" data-v-0a207dfb></span><span class="bottom" data-v-0a207dfb></span></span></button></div></div></div></div><div class="divider" data-v-0147e35f><div class="divider-line" data-v-0147e35f></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-c61a2575 data-v-83b55a64><div class="container" data-v-83b55a64><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-83b55a64><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-83b55a64><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-83b55a64>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-83b55a64 data-v-57f836a3><button data-v-57f836a3>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-c61a2575 data-v-85fa3294><div class="curtain" data-v-85fa3294></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-85fa3294><span class="visually-hidden" id="sidebar-aria-label" data-v-85fa3294> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-85fa3294><section class="VPSidebarItem level-0 has-active" data-v-85fa3294 data-v-0ebd75ee><!----><div class="items" data-v-0ebd75ee><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0ebd75ee data-v-0ebd75ee><div class="item" data-v-0ebd75ee><div class="indicator" data-v-0ebd75ee></div><a class="VPLink link link" href="/ProjectConstructionBlog/docs/Docker.html" data-v-0ebd75ee><!--[--><p class="text" data-v-0ebd75ee>Docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0ebd75ee data-v-0ebd75ee><div class="item" data-v-0ebd75ee><div class="indicator" data-v-0ebd75ee></div><a class="VPLink link link" href="/ProjectConstructionBlog/docs/Mybatis3.html" data-v-0ebd75ee><!--[--><p class="text" data-v-0ebd75ee>Mybatis3</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c61a2575 data-v-34fa5cce><div class="VPDoc has-sidebar has-aside" data-v-34fa5cce data-v-e03000ce><!--[--><!--]--><div class="container" data-v-e03000ce><div class="aside" data-v-e03000ce><div class="aside-curtain" data-v-e03000ce></div><div class="aside-container" data-v-e03000ce><div class="aside-content" data-v-e03000ce><div class="VPDocAside" data-v-e03000ce data-v-6af3eeff><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-6af3eeff data-v-c42be4c2><div class="content" data-v-c42be4c2><div class="outline-marker" data-v-c42be4c2></div><div class="outline-title" role="heading" aria-level="2" data-v-c42be4c2>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-c42be4c2><span class="visually-hidden" id="doc-outline-aria-label" data-v-c42be4c2> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-c42be4c2 data-v-e0e45b99><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-6af3eeff></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e03000ce><div class="content-container" data-v-e03000ce><!--[--><!--]--><main class="main" data-v-e03000ce><div style="position:relative;" class="vp-doc _ProjectConstructionBlog_docs_Docker" data-v-e03000ce><div><h1 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-label="Permalink to &quot;Docker&quot;">​</a></h1><blockquote><p><strong>由于每台服务器的运行环境不同，你写好的安装流程、部署脚本并不一定在每个服务器都能正常运行</strong>，经常会出错。这就给系统的部署运维带来了很多困难</p><p><code>Docker</code>技术能够避免部署对服务器环境的依赖，减少复杂的部署流程</p></blockquote><blockquote><p><code>CentOS</code>的虚拟机中安装<code>Docker</code>，以下都是在虚拟机当中操作</p></blockquote><h2 id="linux环境搭建" tabindex="-1">Linux环境搭建 <a class="header-anchor" href="#linux环境搭建" aria-label="Permalink to &quot;Linux环境搭建&quot;">​</a></h2><h3 id="安装vmware" tabindex="-1">安装<code>VMware</code> <a class="header-anchor" href="#安装vmware" aria-label="Permalink to &quot;安装`VMware`&quot;">​</a></h3><ul><li>这里就不展开了，百度跟着教程安装就行~</li></ul><h3 id="创建虚拟机" tabindex="-1">创建虚拟机 <a class="header-anchor" href="#创建虚拟机" aria-label="Permalink to &quot;创建虚拟机&quot;">​</a></h3><ul><li>这里就不展开了，百度跟着教程安装就行~</li><li>注意：<code>Centos7</code>是比较常用的一个<code>Linux</code>发行版本，在国内的使用比例还是比较高的。所以我们采用<code>Centos7</code>，首先要下载一个<code>Centos7</code>的<code>iso</code>文件（这个也百度找一个下载），创建虚拟机过程中安装程序光盘映像文件会用到的~</li></ul><img src="/ProjectConstructionBlog/assets/image-20240626114101618.WMRVqFnp.png" alt="image-20240626114101618" style="zoom:50%;"><h3 id="安装centos7" tabindex="-1">安装<code>Centos7</code> <a class="header-anchor" href="#安装centos7" aria-label="Permalink to &quot;安装`Centos7`&quot;">​</a></h3><ul><li>选中<code>Install Centos 7</code> 后按下回车</li></ul><img src="/ProjectConstructionBlog/assets/image-20240626114531790.JK5sTjUb.png" alt="image-20240626114531790" style="zoom:50%;"><ul><li>会提示我们按下<code>enter</code>键继续</li></ul><img src="/ProjectConstructionBlog/assets/image-20240626114626002.8X-mLITi.png" alt="image-20240626114626002" style="zoom:50%;"><ul><li>过一会儿后，会进入语言选择菜单，选择中文-简体中文，然后继续</li></ul><img src="/ProjectConstructionBlog/assets/image-20240626114654682.kRr55Lee.png" alt="image-20240626114654682" style="zoom:50%;"><ul><li><p>接下来，会进入安装配置页面</p><img src="/ProjectConstructionBlog/assets/image-20240626114715958.aZIKbuhh.png" alt="image-20240626114715958" style="zoom:50%;"></li><li><p>鼠标向下滚动后，找到系统-安装位置配置</p><img src="/ProjectConstructionBlog/assets/image-20240626114742074.wtQEzjaL.png" alt="image-20240626114742074" style="zoom:50%;"></li><li><p>选择刚刚添加的磁盘，并点击完成</p><img src="/ProjectConstructionBlog/assets/image-20240626114802190.9wm5ZeMs.png" alt="image-20240626114802190" style="zoom:50%;"></li><li><p>然后回到配置页面，这次点击《网络和主机名》</p><img src="/ProjectConstructionBlog/assets/image-20240626114823325.OxA0-hCN.png" alt="image-20240626114823325" style="zoom:50%;"><ol><li>修改主机名为自己喜欢的主机名，不要出现中文和特殊字符，建议用<code>localhost</code></li><li>点击应用</li><li>将网络连接打开</li><li>点击配置，设置详细网络信息</li></ol><img src="/ProjectConstructionBlog/assets/image-20240626114854977.pYuyaLcO.png" alt="image-20240626114854977" style="zoom:50%;"></li><li><p>最好用一个截图软件，记住上图中的网络详细信息，接下来的配置要参考</p><p><img src="/ProjectConstructionBlog/assets/image-20240626114936193.zZbS9GXk.png" alt="image-20240626114936193"></p></li><li><p>点击配置按钮后，我们需要把<strong>网卡</strong>地址改为<code>静态IP</code>，这样可以避免每次启动<code>虚拟机IP</code>都变化。所有配置照你自己截图的网络信息填写</p><img src="/ProjectConstructionBlog/assets/image-20240626115041178.0Z9GmwUO.png" alt="image-20240626115041178" style="zoom:50%;"><blockquote><p>上图中的四个信息参考你自己本地<strong>以太网(ens33)网卡</strong>的截图</p></blockquote></li><li><p>最后，点击完成按钮</p><img src="/ProjectConstructionBlog/assets/image-20240626115126181.nNgcqgZo.png" alt="image-20240626115126181" style="zoom:50%;"></li><li><p>回到配置界面后，点击开始安装</p><img src="/ProjectConstructionBlog/assets/image-20240626115158376.ZEaGFg3V.png" alt="image-20240626115158376" style="zoom:50%;"></li><li><p>接下来需要设置<code>root</code>密码</p><img src="/ProjectConstructionBlog/assets/image-20240626115219068.c-vk_xiD.png" alt="image-20240626115219068" style="zoom:50%;"></li><li><p>填写你要使用的<code>root</code>密码，然后点击完成</p><img src="/ProjectConstructionBlog/assets/image-20240626115240014.1eNyUBNJ.png" alt="image-20240626115240014" style="zoom:50%;"></li><li><p>接下来，耐心等待安装即可</p><img src="/ProjectConstructionBlog/assets/image-20240626115300333.fGia4Jwt.png" alt="image-20240626115300333" style="zoom:50%;"></li><li><p>等待安装完成后，点击<strong>重启</strong></p><img src="/ProjectConstructionBlog/assets/image-20240626115319103.nkUJmzhP.png" alt="image-20240626115319103" style="zoom:50%;"></li><li><p>耐心等待一段时间，不要做任何操作，虚拟机即可启动完毕</p><img src="/ProjectConstructionBlog/assets/image-20240626115413292.94f3k8FE.png" alt="image-20240626115413292" style="zoom:50%;"></li><li><p>输入用户名<code>root</code>，然后点击回车，会要求你输入密码</p><img src="/ProjectConstructionBlog/assets/image-20240626115437288.h2N_u0YF.png" alt="image-20240626115437288" style="zoom:50%;"></li><li><p>此时你要输入密码，不过需要注意的是密码是<strong>隐藏</strong>的，输入了也看不见。所以放心输入，完成后回车即可</p><img src="/ProjectConstructionBlog/assets/image-20240626115503017.AOmI2mZ1.png" alt="image-20240626115503017" style="zoom:50%;"></li><li><p>只要密码输入正确，就可以正常登录。此时可以用命令测试虚拟机网络是否畅通</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> baidu.com</span></span></code></pre></div><ul><li>如果看到这样的结果代表网络畅通：</li></ul><p><img src="/ProjectConstructionBlog/assets/image-20240626115539493.5FT51gjT.png" alt="image-20240626115539493"></p><ul><li>默认<code>ping</code>命令会持续执行，按下<code>CTRL </code>+ <code>C</code>后命令即可停止，此时环境就算是全部安装完成了</li></ul></li></ul><h3 id="安装一个ssh客户端" tabindex="-1">安装一个SSH客户端 <a class="header-anchor" href="#安装一个ssh客户端" aria-label="Permalink to &quot;安装一个SSH客户端&quot;">​</a></h3><ul><li>在<code>VMware</code>界面中操作虚拟机非常不友好，所以一般推荐使用专门的<code>SSH</code>客户端，市面上常见的有： <ul><li><code>Xshell</code>：个人免费，商业收费。推荐使用</li><li><code>Finshell</code>：基础功能免费，高级功能收费，基于Java，内存占用较高（在1个G左右）。不推荐</li><li><code>MobarXterm</code>：基础功能免费、高级功能收费。开源、功能强大、内存占用低（只有<code>10m</code>左右），但是界面不太漂亮。推荐使用</li></ul></li><li>我这里安装的是<code>Xshell7</code></li></ul><img src="/ProjectConstructionBlog/assets/image-20240626113805295.2dBru75H.png" alt="image-20240626113805295" style="zoom:50%;"><ul><li><p>如下就是连接上了，在客户端里面操作非常方便的~</p><img src="/ProjectConstructionBlog/assets/image-20240626115845063.0gFnRH1-.png" alt="image-20240626115845063" style="zoom:67%;"></li></ul><h2 id="docker安装" tabindex="-1">Docker安装 <a class="header-anchor" href="#docker安装" aria-label="Permalink to &quot;Docker安装&quot;">​</a></h2><h3 id="卸载旧版" tabindex="-1">卸载旧版 <a class="header-anchor" href="#卸载旧版" aria-label="Permalink to &quot;卸载旧版&quot;">​</a></h3><ul><li><p>如果系统中已经存在旧的Docker，则先卸载</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    docker-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    docker-client-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    docker-common</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    docker-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    docker-latest-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    docker-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    docker-engine</span></span></code></pre></div></li></ul><h3 id="配置docker的yum库" tabindex="-1">配置Docker的yum库 <a class="header-anchor" href="#配置docker的yum库" aria-label="Permalink to &quot;配置Docker的yum库&quot;">​</a></h3><ul><li><p>首先要安装一个yum工具</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum-utils</span></span></code></pre></div></li><li><p>安装成功后，执行命令，配置Docker的yum源 - 这里我们使用阿里云的</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum-config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre></div></li></ul><h3 id="安装docker" tabindex="-1">安装Docker <a class="header-anchor" href="#安装docker" aria-label="Permalink to &quot;安装Docker&quot;">​</a></h3><ul><li><p>执行命令，安装Docke</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-ce</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-ce-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd.io</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-buildx-plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-compose-plugin</span></span></code></pre></div></li></ul><h3 id="启动和校验" tabindex="-1">启动和校验 <a class="header-anchor" href="#启动和校验" aria-label="Permalink to &quot;启动和校验&quot;">​</a></h3><div class="language-Bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动Docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 停止Docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置开机自启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行docker ps命令，如果不报错，说明安装启动成功</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span></span></code></pre></div><h3 id="配置镜像加速" tabindex="-1">配置镜像加速 <a class="header-anchor" href="#配置镜像加速" aria-label="Permalink to &quot;配置镜像加速&quot;">​</a></h3><blockquote><p>这里以阿里云镜像加速为例</p></blockquote><h4 id="注册阿里云账号" tabindex="-1">注册阿里云账号 <a class="header-anchor" href="#注册阿里云账号" aria-label="Permalink to &quot;注册阿里云账号&quot;">​</a></h4><blockquote><p>首先访问阿里云网站：<a href="https://www.aliyun.com/%EF%BC%8C%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA%E8%B4%A6%E5%8F%B7%E3%80%82" target="_blank" rel="noreferrer">https://www.aliyun.com/，注册一个账号。</a></p></blockquote><h4 id="开通镜像服务" tabindex="-1">开通镜像服务 <a class="header-anchor" href="#开通镜像服务" aria-label="Permalink to &quot;开通镜像服务&quot;">​</a></h4><ul><li>在首页的产品中，找到阿里云的<strong>容器镜像服务</strong></li></ul><img src="/ProjectConstructionBlog/assets/image-20240626131403388.9qOLPMBE.png" alt="image-20240626131403388" style="zoom:50%;"><ul><li>点击后进入控制台</li></ul><img src="/ProjectConstructionBlog/assets/image-20240626131424638.Nu-IC_zq.png" alt="image-20240626131424638" style="zoom:50%;"><ul><li>首次可能需要选择立刻开通，然后进入控制台</li></ul><h4 id="配置镜像加速-1" tabindex="-1">配置镜像加速 <a class="header-anchor" href="#配置镜像加速-1" aria-label="Permalink to &quot;配置镜像加速&quot;">​</a></h4><ul><li>找到<strong>镜像工具</strong>下的<strong>镜像加速器</strong></li></ul><img src="/ProjectConstructionBlog/assets/image-20240626131523075.rBh8mzZl.png" alt="image-20240626131523075" style="zoom:50%;"><ul><li><p>页面向下滚动，即可找到配置的文档说明</p><img src="/ProjectConstructionBlog/assets/image-20240626131609913.NYfUgiRE.png" alt="image-20240626131609913" style="zoom:50%;"></li></ul><h2 id="快速入门" tabindex="-1">快速入门 <a class="header-anchor" href="#快速入门" aria-label="Permalink to &quot;快速入门&quot;">​</a></h2><blockquote><p>要想让<code>Docker</code>帮我们安装和部署软件，肯定要保证你的机器上有<code>Docker</code>，请查看 <code>Docker安装</code></p></blockquote><h3 id="部署mysql" tabindex="-1">部署<code>MySQL</code> <a class="header-anchor" href="#部署mysql" aria-label="Permalink to &quot;部署`MySQL`&quot;">​</a></h3><blockquote><p>传统方式部署<code>MySQL</code>，大概的步骤有：</p><ul><li>搜索并下载<code>MySQL</code>安装包</li><li>上传至<code>Linux</code>环境</li><li>编译和配置环境</li><li>安装</li></ul></blockquote><ul><li><p><code>Docker</code>安装，仅仅需要一步即可，在命令行输入下面的命令</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3306</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Asia/Shanghai</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  mysql</span></span></code></pre></div></li><li><p>运行效果如图：</p></li></ul><p><img src="/ProjectConstructionBlog/assets/image-20240626132712616.gKOpFPw8.png" alt="image-20240626132712616"></p><blockquote><p><code>MySQL</code>安装完毕！</p><ul><li>执行命令后，<code>Docker</code>会自动搜索并下载<code>MySQL</code>（这里下载的不是安装包，而是<strong>镜像</strong>），接着会自动运行<code>MySQL</code></li><li>完全不用考虑运行的操作系统环境，它不仅仅在<code>CentOS</code>系统是这样，在<code>Ubuntu</code>系统、<code>macOS</code>系统、甚至是装了<code>WSL</code>的<code>Windows</code>下，都可以使用这条命令来安装<code>MySQL</code>（如果是<strong>手动安装，必须手动解决安装包不同、环境不同的、配置不同的问题</strong>！）</li></ul><p><strong>镜像</strong></p><ul><li>镜像中不仅包含了<code>MySQL</code>本身，还包含了其运行所需要的<strong>环境</strong>、<strong>配置</strong>、<strong>系统级函数库</strong>，因此它在运行时就有自己<strong>独立的环境</strong>，就可以<strong>跨系统运行</strong>，也不需要手动再次配置环境了</li></ul><p><strong>容器</strong></p><ul><li>镜像中不仅包含了<code>MySQL</code>本身，还包含了其运行所需要的<strong>环境</strong>、<strong>配置</strong>、<strong>系统级函数库</strong>，因此它在运行时就有自己<strong>独立的环境</strong>，就可以<strong>跨系统运行</strong>，也不需要手动再次配置环境了。这套独立运行的隔离环境我们称为<strong>容器</strong></li></ul><p><strong>总结</strong></p><ul><li>因此，<code>Docker</code>安装软件的过程，就是自动搜索下载镜像，然后创建并运行容器的过程</li></ul></blockquote><h3 id="执行原理" tabindex="-1">执行原理 <a class="header-anchor" href="#执行原理" aria-label="Permalink to &quot;执行原理&quot;">​</a></h3><ul><li><p><code>Docker</code>是去哪里搜索和下载镜像的呢？这些镜像又是谁制作的呢？</p><img src="/ProjectConstructionBlog/assets/image-20240626133640313.dxCI1g2u.png" alt="image-20240626133640313" style="zoom:67%;"><blockquote><p><code>Docker</code>本身包含一个后台服务，我们可以利用<code>Docker</code>命令告诉<code>Docker</code>服务，帮助我们快速部署指定的应用。</p><p><code>Docker</code>服务部署应用时，首先要去搜索并下载应用对应的镜像，然后根据镜像创建并允许容器，应用就部署完成了。</p></blockquote></li></ul><img src="/ProjectConstructionBlog/assets/image-20240626134000758.3KX_gisR.png" alt="image-20240626134000758" style="zoom:67%;"><h3 id="命令解读" tabindex="-1">命令解读 <a class="header-anchor" href="#命令解读" aria-label="Permalink to &quot;命令解读&quot;">​</a></h3><ul><li>我们来看一下安装<code>MySQL</code>的命令到底是啥意思</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3306</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Asia/Shanghai</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  mysql</span></span></code></pre></div><blockquote><p><strong>解读</strong></p><ul><li><code>docker run -d</code> ：创建并运行一个容器，<code>-d</code>则是让容器以后台进程运行</li><li><code>--name mysql </code> : 给容器起个名字叫<code>mysql</code>，也可以叫别的（<strong>需要唯一</strong>！用于区分不同容器）</li><li><code>-p 3306:3306</code> : 设置端口映射。（右边的<code>3306</code>是<code>MySQL</code>，左边是宿主机映射的，可以变） <ul><li><strong>容器是隔离环境</strong>，外界不可访问。但是可以<strong>将宿主机端口映射到容器内的端口</strong>，当访问宿主机指定端口时，就是在访问容器内的端口了。</li><li>容器内端口往往是由容器内的进程决定，例如<code>MySQL</code>进程默认端口是<code>3306</code>，因此容器内端口一定是<code>3306</code>；而<strong>宿主机端口则可以任意指定</strong>，一般与容器内保持一致。</li><li>格式： <code>-p 宿主机端口:容器内端口</code>，示例中就是将宿主机的<code>3306</code>映射到容器内的<code>3306</code>端口</li></ul></li><li><code>-e TZ=Asia/Shanghai</code> : 配置容器内进程运行时的一些参数 <ul><li>格式：<code>-e KEY=VALUE</code>，<code>KEY</code>和<code>VALUE</code>都由容器内进程决定</li><li>案例中，<code>TZ=Asia/Shanghai</code>是设置时区；<code>MYSQL_ROOT_PASSWORD=123</code>是设置<code>MySQL</code>默认密码</li></ul></li><li><code>mysql</code> : 设置<strong>镜像</strong>名称，Docker会根据这个名字搜索并下载镜像 <ul><li>格式：<code>REPOSITORY:TAG</code>，例如<code>mysql:8.0</code>，其中<code>REPOSITORY</code>可以理解为镜像名，<code>TAG</code>是版本号</li><li>在未指定<code>TAG</code>的情况下，默认是最新版本，也就是<code>mysql:latest</code></li></ul></li></ul><p><strong>注意</strong></p><ul><li>镜像的名称不是随意的，而是要到<code>DockerRegistry</code>中寻找</li><li>镜像运行时的配置也不是随意的，要参考镜像的帮助文档</li><li>以上在<code>DockerHub</code>网站或者软件的官方网站中都能找到</li></ul></blockquote><h2 id="docker基础" tabindex="-1">Docker基础 <a class="header-anchor" href="#docker基础" aria-label="Permalink to &quot;Docker基础&quot;">​</a></h2><h3 id="常见命令" tabindex="-1">常见命令 <a class="header-anchor" href="#常见命令" aria-label="Permalink to &quot;常见命令&quot;">​</a></h3><div class="vp-table__container"><table><thead><tr><th style="text-align:left;"><strong>命令</strong></th><th style="text-align:left;"><strong>说明</strong></th><th style="text-align:left;"><strong>文档地址</strong></th></tr></thead><tbody><tr><td style="text-align:left;">docker pull</td><td style="text-align:left;">拉取镜像</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/pull/" target="_blank" rel="noreferrer">docker pull</a></td></tr><tr><td style="text-align:left;">docker push</td><td style="text-align:left;">推送镜像到DockerRegistry</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/push/" target="_blank" rel="noreferrer">docker push</a></td></tr><tr><td style="text-align:left;">docker /images/docker</td><td style="text-align:left;">查看本地镜像</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline//images/docker/" target="_blank" rel="noreferrer">docker /images/docker</a></td></tr><tr><td style="text-align:left;">docker rmi</td><td style="text-align:left;">删除本地镜像</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/rmi/" target="_blank" rel="noreferrer">docker rmi</a></td></tr><tr><td style="text-align:left;">docker run</td><td style="text-align:left;">创建并运行容器（不能重复创建）</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/run/" target="_blank" rel="noreferrer">docker run</a></td></tr><tr><td style="text-align:left;">docker stop</td><td style="text-align:left;">停止指定容器</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/stop/" target="_blank" rel="noreferrer">docker stop</a></td></tr><tr><td style="text-align:left;">docker start</td><td style="text-align:left;">启动指定容器</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/start/" target="_blank" rel="noreferrer">docker start</a></td></tr><tr><td style="text-align:left;">docker restart</td><td style="text-align:left;">重新启动容器</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/restart/" target="_blank" rel="noreferrer">docker restart</a></td></tr><tr><td style="text-align:left;">docker rm</td><td style="text-align:left;">删除指定容器</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/rm/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker ps</td><td style="text-align:left;">查看容器</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/ps/" target="_blank" rel="noreferrer">docker ps</a></td></tr><tr><td style="text-align:left;">docker logs</td><td style="text-align:left;">查看容器运行日志</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/logs/" target="_blank" rel="noreferrer">docker logs</a></td></tr><tr><td style="text-align:left;">docker exec</td><td style="text-align:left;">进入容器</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/exec/" target="_blank" rel="noreferrer">docker exec</a></td></tr><tr><td style="text-align:left;">docker save</td><td style="text-align:left;">保存镜像到本地压缩文件</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/save/" target="_blank" rel="noreferrer">docker save</a></td></tr><tr><td style="text-align:left;">docker load</td><td style="text-align:left;">加载本地压缩文件到镜像</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/load/" target="_blank" rel="noreferrer">docker load</a></td></tr><tr><td style="text-align:left;">docker inspect</td><td style="text-align:left;">查看容器详细信息</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/inspect/" target="_blank" rel="noreferrer">docker inspect</a></td></tr></tbody></table></div><ul><li>一副图来表示这些命令的关系</li></ul><img src="/ProjectConstructionBlog/assets/image-20240626135821520.gefmEttR.png" alt="image-20240626135821520" style="zoom:80%;"><ul><li><p>默认情况下，每次重启虚拟机我们都需要手动启动<code>Docker</code>和<code>Docker</code>中的容器。通过命令可以实现开机自启</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看Docker是否开启状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Docker开机自启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Docker关闭开机自启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Docker容器开机自启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart=always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [容器名/容器id]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Docker容器关闭自启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart=no</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [容器名/容器id]</span></span></code></pre></div></li></ul><h4 id="实战" tabindex="-1">实战 <a class="header-anchor" href="#实战" aria-label="Permalink to &quot;实战&quot;">​</a></h4><blockquote><p>以<code>Nginx</code>为例演示上面命令</p></blockquote><ol><li>去<a href="https://hub.docker.com/" target="_blank" rel="noreferrer">DockerHub</a>查看<code>nginx</code>镜像仓库及相关信息</li></ol><img src="/ProjectConstructionBlog/assets/image-20240626145011879.T9qW4j22.png" alt="image-20240626145011879" style="zoom:50%;"><ol start="2"><li><p>拉取<code>nginx</code>镜像</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626145202943.Lb0Ujtul.png" alt="image-20240626145202943" style="zoom:80%;"></li><li><p>查看镜像</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /images/docker</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626145250275.lVgwwCHl.png" alt="image-20240626145250275" style="zoom:80%;"></li><li><p>创建并允许<code>Nginx</code>容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:80</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626145557188.oDahgHTs.png" alt="image-20240626145557188" style="zoom:80%;"><ul><li>-d：在后台运行容器</li><li>--name： 为容器分配名称</li><li>-p：设置端口映射（左边是宿主机端口:右边是容器内端口）</li></ul></li><li><p>查看运行中容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626145857607.jPE67yeF.png" alt="image-20240626145857607" style="zoom:80%;"><ul><li><p>格式化访问，格式会更加清爽</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;table {{.ID}}\t{{.Image}}\t{{.Ports}}\t{{.Status}}\t{{.Names}}&quot;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626150038118.d19RlOSP.png" alt="image-20240626150038118" style="zoom:80%;"></li></ul></li><li><p>访问网页，测试<code>nginx</code>是否启动成功</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://192.168.58.169:80   # 这里填你自己的虚拟机地址</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626150201543.tqCGL1BL.png" alt="image-20240626150201543" style="zoom:50%;"></li><li><p>停止容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><img src="data:image/png;base64,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" alt="image-20240626150317552" style="zoom:80%;"></li><li><p>查看所有容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626150417609.buuPL55B.png" alt="image-20240626150417609" style="zoom:80%;"><ul><li><p>格式化访问，格式会更加清爽</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;table {{.ID}}\t{{.Image}}\t{{.Ports}}\t{{.Status}}\t{{.Names}}&quot;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626150511142.uu2oCDGg.png" alt="image-20240626150511142" style="zoom:80%;"></li></ul></li><li><p>再次启动<code>nginx</code>容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><img src="data:image/png;base64,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" alt="image-20240626150552526" style="zoom:80%;"></li><li><p>再次查看容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;table {{.ID}}\t{{.Image}}\t{{.Ports}}\t{{.Status}}\t{{.Names}}&quot;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626150644716.X-mkGFWC.png" alt="image-20240626150644716" style="zoom:80%;"></li><li><p>查看容器详细信息</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626150820507.2dnLgDFG.png" alt="image-20240626150820507" style="zoom:80%;"></li><li><p>进入容器,查看容器内目录</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626150916686.StmVcNyT.png" alt="image-20240626150916686" style="zoom:80%;"><ul><li><p>或者，可以进入<code>MySQL</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span></code></pre></div></li></ul></li><li><p>进入容器后，退出容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626151131661.xB7irsIY.png" alt="image-20240626151131661" style="zoom:80%;"></li><li><p>删除容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626151217904.zc0cLY3l.png" alt="image-20240626151217904" style="zoom:80%;"><ul><li><p>发现无法删除，因为容器运行中，强制删除容器（或者你手动停止这个容器，在进行删除）</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div></li></ul></li></ol><h4 id="命令别名" tabindex="-1">命令别名 <a class="header-anchor" href="#命令别名" aria-label="Permalink to &quot;命令别名&quot;">​</a></h4><blockquote><p>给常用<code>Docker</code>命令起别名，方便我们访问</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/.bashrc</span></span></code></pre></div><p>此时会进入到文件里面，显示的内容如下：</p><img src="/ProjectConstructionBlog/assets/image-20240626151641488.cbNXSLgg.png" alt="image-20240626151641488" style="zoom:80%;"><ul><li><p>这里涉及到一些vi命令的知识~自行百度~</p></li><li><p>简单说下：进入到文件后 按 <code>i</code> 就进入了<code>insert</code>插入模式，此时就可以修改内容，编辑好了内容，按一下<code>Esc</code>键，退出插入模式，此时按 <code>Shift + ; </code>键，然后输入<code>wq</code>（保存的意思），按回车键即可！</p><p><img src="/ProjectConstructionBlog/assets/image-20240626151902437.hUxAi2_K.png" alt="image-20240626151902437"></p></li><li><p>最后，执行命令使别名生效</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/.bashrc</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626152011634.m_mHcBiG.png" alt="image-20240626152011634" style="zoom:80%;"><ul><li>可以发现，<code>dis</code>、<code>dps</code>命令都可以正常使用了</li></ul></li></ul><h3 id="数据卷" tabindex="-1">数据卷 <a class="header-anchor" href="#数据卷" aria-label="Permalink to &quot;数据卷&quot;">​</a></h3><blockquote><p>容器是隔离环境，容器内程序的文件、配置、运行时产生的容器都在容器内部，我们要读写容器内的文件非常不方便</p><ul><li>如果要升级<code>MySQL</code>版本，需要销毁旧容器，那么数据岂不是跟着被销毁了？</li><li><code>MySQL</code>、<code>Nginx</code>容器运行后，如果我要修改其中的某些配置该怎么办？</li><li>我想要让<code>Nginx</code>代理我的静态资源怎么办？</li></ul><p>因此，容器提供程序的运行环境，但是<strong>程序运行产生的数据、程序运行依赖的配置都应该与容器耦</strong>。</p></blockquote><p>数据卷就是为了解决上面问题而出现的</p><h4 id="什么是数据卷" tabindex="-1">什么是数据卷？ <a class="header-anchor" href="#什么是数据卷" aria-label="Permalink to &quot;什么是数据卷？&quot;">​</a></h4><blockquote><p><strong>数据卷（volume）<strong>是一个虚拟目录，是</strong>容器内目录</strong>与<strong>宿主机目录</strong>之间映射的桥梁。</p></blockquote><p>拿<code>Nginx</code>来说，有两个关键的目录</p><ul><li><code>html</code>：放置一些静态资源</li><li><code>conf</code>：放置配置文件</li></ul><p>要让<code>Nginx</code>代理我们的静态资源，最好是放到<code>html</code>目录；如果我们要修改<code>Nginx</code>的配置，最好是找到<code>conf</code>下的<code>nginx.conf</code>文件，此时，容器运行的<code>Nginx</code>所有的文件都在容器内部，所以我们必须利用<strong>数据卷将两个目录与宿主机目录关联</strong>，从而方便我们操作（利用数据卷可以实现宿主机目录和容器内目录之间的双向映射）</p><img src="/ProjectConstructionBlog/assets/image-20240626202316931.OQ5WfJQR.png" alt="image-20240626202316931" style="zoom:80%;"><p>上图中</p><ul><li>我们创建了两个数据卷：<code>conf</code>、<code>html</code></li><li><code>Nginx</code>容器内部的<code>conf</code>目录和<code>html</code>目录分别与两个数据卷关联</li><li>而数据卷<code>conf</code>和<code>html</code>分别指向了宿主机的<code>/var/lib/docker/volumes/conf/_data</code>目录和<code>/var/lib/docker/volumes/html/_data</code>目录</li></ul><blockquote><p>这样一来，容器内的<code>conf</code>和<code>html</code>目录就 与宿主机的<code>conf</code>和<code>html</code>目录关联起来，我们称为<strong>挂载</strong>。</p><p>此时，我们操作宿主机的<code>/var/lib/docker/volumes/html/_data</code>就是在操作容器内的<code>/usr/share/nginx/html/_data</code>目录。</p><p>只要我们将静态资源放入宿主机对应目录，就可以被<code>Nginx</code>代理了。</p></blockquote><blockquote><p><strong>小提示</strong>：</p><p><code>/var/lib/docker/volumes</code>这个目录就是默认的存放所有容器数据卷的目录，其下再根据数据卷名称创建新目录，格式为<code>/数据卷名/_data</code>。</p><p><strong>为什么不让容器目录直接指向宿主机目录呢</strong>？</p><ul><li>因为直接指向宿主机目录就与宿主机强耦合了，如果切换了环境，宿主机目录就可能发生改变了。由于容器一旦创建，目录挂载就无法修改，这样容器就无法正常工作了。</li><li>但是容器指向数据卷，一个逻辑名称，而数据卷再指向宿主机目录，就不存在强耦合。如果宿主机目录发生改变，只要改变数据卷与宿主机目录之间的映射关系即可。</li></ul><p>不过，我们通过由于数据卷目录比较深，不好寻找，通常我们也<strong>允许让容器直接与宿主机目录挂载而不使用数据卷</strong>，具体参考<code>挂载本地目录或文件</code>章节笔记</p></blockquote><h4 id="创建数据卷的时机" tabindex="-1">创建数据卷的时机 <a class="header-anchor" href="#创建数据卷的时机" aria-label="Permalink to &quot;创建数据卷的时机&quot;">​</a></h4><blockquote><p>容器与数据卷的挂载要在<strong>创建容器时配置</strong>，对于创建好的容器，是不能设置数据卷的。而且<strong>创建容器的过程中，数据卷会自动创建</strong></p></blockquote><h4 id="数据库命令" tabindex="-1">数据库命令 <a class="header-anchor" href="#数据库命令" aria-label="Permalink to &quot;数据库命令&quot;">​</a></h4><div class="vp-table__container"><table><thead><tr><th style="text-align:left;"><strong>命令</strong></th><th style="text-align:left;"><strong>说明</strong></th><th style="text-align:left;"><strong>文档地址</strong></th></tr></thead><tbody><tr><td style="text-align:left;">docker volume create</td><td style="text-align:left;">创建数据卷</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/volume_create/" target="_blank" rel="noreferrer">docker volume create</a></td></tr><tr><td style="text-align:left;">docker volume ls</td><td style="text-align:left;">查看所有数据卷</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/volume_ls/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker volume rm</td><td style="text-align:left;">删除指定数据卷</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/volume_prune/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker volume inspect</td><td style="text-align:left;">查看某个数据卷的详情</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/volume_inspect/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker volume prune</td><td style="text-align:left;">清除数据卷</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/volume_prune/" target="_blank" rel="noreferrer">docker volume prune</a></td></tr></tbody></table></div><h5 id="实战-1" tabindex="-1">实战 <a class="header-anchor" href="#实战-1" aria-label="Permalink to &quot;实战&quot;">​</a></h5><ul><li><code>nginx</code>的<code>html</code>目录挂载</li></ul><ol><li><p>首先创建容器并指定数据卷，注意通过 <code>-v </code> 参数来指定数据卷 （-v 数据卷名:容器内目录）</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> html:/usr/share/nginx/html</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626203344921._4sfpPhh.png" alt="image-20240626203344921" style="zoom:80%;"></li><li><p>查看数据卷</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626203838348.BmKPf3a9.png" alt="image-20240626203838348" style="zoom:80%;"></li><li><p>查看数据卷详情</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> html</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626204014027.qC4e-T1Y.png" alt="image-20240626204014027" style="zoom:80%;"></li><li><p>查看<code>/var/lib/docker/volumes/html/_data</code>目录</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ll</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/docker/volumes/html/_data</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626204056197.5rdOt_jd.png" alt="image-20240626204056197" style="zoom:80%;"><ul><li>可以看到和<code>nginx</code>容器里面的<code>html</code>目录内容一样</li></ul><p><img src="/ProjectConstructionBlog/assets/image-20240626210040997.hYtR4D6Y.png" alt="image-20240626210040997"></p></li><li><p>进入到宿主机对应的目录，并随意修改<code>index.html</code>内容</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/docker/volumes/html/_data</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.html</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626210647262.0JfkNQ4e.png" alt="image-20240626210647262" style="zoom:80%;"><img src="/ProjectConstructionBlog/assets/image-20240626210832622.sMT3QmWD.png" alt="image-20240626210832622" style="zoom:80%;"></li><li><p>访问<code>nginx</code>，查看效果</p><img src="/ProjectConstructionBlog/assets/image-20240626210957257.p6adriDe.png" alt="image-20240626210957257" style="zoom:67%;"></li><li><p>我们刚刚修改了宿主机里面的内容，我们现在进入容器内部，查看<code>/usr/share/nginx/html</code>目录内的文件是否变化</p><img src="/ProjectConstructionBlog/assets/image-20240626211243717.lBCD6aOm.png" alt="image-20240626211243717" style="zoom:67%;"><ul><li><strong>可以发现，我们刚刚修改了宿主机的文件内容，容器内部的文件内容也发生了变化，测试可得：是同步的。</strong></li></ul></li></ol><h4 id="mysql的匿名数据卷" tabindex="-1"><code>MySQL</code>的匿名数据卷 <a class="header-anchor" href="#mysql的匿名数据卷" aria-label="Permalink to &quot;`MySQL`的匿名数据卷&quot;">​</a></h4><ol><li><p>查看<code>MySQL</code>容器详细信息</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><p>关注两部分内容，第一是<code>.Config.Volumes</code>部分</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;Config&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 略</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    &quot;Volumes&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      &quot;/var/lib/mysql&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 略</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>可以发现这个容器声明了一个本地目录，需要挂载数据卷，但是<strong>数据卷未定义</strong>。这就是匿名卷。再看结果中的<code>.Mounts</code>部分：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;Mounts&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;Type&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;volume&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;Name&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;e90f6c7f57224c4c9d43dfddd0e7ff44dc33001ab476e718129441d3aef11960&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;Source&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/var/lib/docker/volumes/e90f6c7f57224c4c9d43dfddd0e7ff44dc33001ab476e718129441d3aef11960/_data&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;Destination&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/var/lib/mysql&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;Driver&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;local&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;Mode&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;RW&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                &quot;Propagation&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><ul><li>Name：数据卷名称。由于定义容器未设置容器名，这里的就是匿名卷自动生成的名字，一串hash值。</li><li>Source：宿主机目录</li><li>Destination : 容器内的目录</li></ul></blockquote></li></ol><p>上述配置是将容器内的<code>/var/lib/mysql</code>这个目录，与数据卷<code>e90f6c7f57224c4c9d43dfddd0e7ff44dc33001ab476e718129441d3aef11960</code>挂载。于是在宿主机中就有了<code>/var/lib/docker/volumes/e90f6c7f57224c4c9d43dfddd0e7ff44dc33001ab476e718129441d3aef11960/_data</code>这个目录。这就是匿名数据卷对应的目录，其使用方式与普通数据卷没有差别。</p><p><img src="/ProjectConstructionBlog/assets/image-20240626212116627.qGlvfHWn.png" alt="image-20240626212116627"></p><ol start="2"><li><p>可以查看该目录下的<code>MySQL</code>的<code>data</code>文件</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/docker/volumes/e90f6c7f57224c4c9d43dfddd0e7ff44dc33001ab476e718129441d3aef11960/_data</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626212248889.rffrgTfe.png" alt="image-20240626212248889" style="zoom:50%;"></li></ol><h4 id="挂载本地目录或文件" tabindex="-1">挂载本地目录或文件 <a class="header-anchor" href="#挂载本地目录或文件" aria-label="Permalink to &quot;挂载本地目录或文件&quot;">​</a></h4><blockquote><p>数据卷的<strong>目录结构较深</strong>，如果我们去操作数据卷目录会不太方便。在很多情况下，我们会直接将<strong>容器目录与宿主机指定目录挂载</strong></p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 挂载本地目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 本地目录:容器内目录</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 挂载本地文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 本地文件:容器内文件</span></span></code></pre></div><p><strong>注意</strong>：本地目录或文件必须以 <code>/</code> 或 <code>./</code>开头，如果直接以名字开头，会被识别为数据卷名而非本地目录名</p><div class="language-Bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql:/var/lib/mysql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 会被识别为一个数据卷叫mysql，运行时会自动创建这个数据卷</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysql:/var/lib/mysql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 会被识别为当前目录下的mysql目录，运行时如果不存在会创建目录</span></span></code></pre></div><h5 id="实战-2" tabindex="-1">实战 <a class="header-anchor" href="#实战-2" aria-label="Permalink to &quot;实战&quot;">​</a></h5><ul><li><p>删除并重新创建<code>mysql</code>容器，并完成本地目录挂载</p><ul><li>挂载<code>/root/mysql/data</code>到容器内的<code>/var/lib/mysql</code>目录</li><li>挂载<code>/root/mysql/init</code>到容器内的<code>/docker-entrypoint-initdb.d</code>目录（初始化的<code>SQL</code>脚本目录）</li><li>挂载<code>/root/mysql/conf</code>到容器内的<code>/etc/mysql/conf.d</code>目录（这个是<code>MySQL</code>配置文件目录）</li></ul></li><li><p>资料中已经准备好了<code>mysql</code>的<code>init</code>目录和<code>conf</code>目录</p></li></ul><img src="/ProjectConstructionBlog/assets/image-20240626213109660.uKRhprsq.png" alt="image-20240626213109660" style="zoom:80%;"><img src="/ProjectConstructionBlog/assets/image-20240626213221897.JBVX9WM9.png" alt="image-20240626213221897" style="zoom:80%;"><ul><li><p><code>hm.cnf</code>主要是配置了<code>MySQL</code>的默认编码，改为<code>utf8mb4</code>；而<code>hmall.sql</code>则是黑马商城项目的初始化<code>SQL</code>脚本</p></li><li><p>将整个<code>mysql</code>目录上传至虚拟机的<code>/root</code>目录下</p><img src="/ProjectConstructionBlog/assets/image-20240626213607069.cySU7RBM.png" alt="image-20240626213607069" style="zoom:50%;"></li></ul><ol><li><p>删除原来的<code>MySQL</code>容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626213807114.X0cigo7L.png" alt="image-20240626213807114" style="zoom:50%;"></li><li><p>创建并运行新<code>mysql</code>容器，挂载本地目录</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3306</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Asia/Shanghai</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysql/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysql/conf:/etc/mysql/conf.d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysql/init:/docker-entrypoint-initdb.d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  mysql</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626213941002.c9cbj5MY.png" alt="image-20240626213941002" style="zoom:50%;"></li><li><p>查看<code>root</code>目录，可以发现<code>~/mysql/data</code>目录已经自动创建好了</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214033177.2sw0TF92.png" alt="image-20240626214033177" style="zoom:80%;"></li><li><p>查看<code>data</code>目录，会发现里面有大量数据库数据，说明数据库完成了初始化</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> data</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214227875.2kQ0RY81.png" alt="image-20240626214227875" style="zoom:50%;"><ol start="5"><li><p>进入<code>MySQL</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p123</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214342442.HlPkr3FG.png" alt="image-20240626214342442" style="zoom:50%;"></li><li><p>查看编码表</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;%char%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214409893.iKi2rV2m.png" alt="image-20240626214409893" style="zoom:50%;"></li><li><p>查看数据库</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show databases;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214457227.KfOw-A33.png" alt="image-20240626214457227" style="zoom:50%;"></li><li><p>切换到<code>hmall</code>数据库</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmall;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214532947.0jnjr40z.png" alt="image-20240626214532947" style="zoom:50%;"></li><li><p>查看表</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show tables;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214601202.sgaf5qJ4.png" alt="image-20240626214601202" style="zoom:50%;"></li><li><p>查看<code>address</code>表数据</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> address</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626214706111.Vjlyosu9.png" alt="image-20240626214706111" style="zoom:50%;"></li></ol></li></ol><h3 id="镜像" tabindex="-1">镜像 <a class="header-anchor" href="#镜像" aria-label="Permalink to &quot;镜像&quot;">​</a></h3><ul><li>一直在使用别人准备好的镜像，那如果我要部署一个<code>Java</code>项目，把它打包为一个镜像该怎么做呢？？？</li></ul><h4 id="结构" tabindex="-1">结构 <a class="header-anchor" href="#结构" aria-label="Permalink to &quot;结构&quot;">​</a></h4><blockquote><p>镜像之所以能让我们快速跨操作系统部署应用而忽略其运行环境、配置，就是因为镜像中包含了程序运行需要的系统函数库、环境、配置、依赖。</p><p>因此，自定义镜像本质就是依次准备好程序运行的基础环境、依赖、应用本身、运行配置等文件，并且打包而成</p><p>举个例子，我们要从0部署一个Java应用，大概流程是这样：</p><ul><li>准备一个<code>linux</code>服务（<code>CentOS</code>或者<code>Ubuntu</code>均可）</li><li>安装并配置<code>JDK</code></li><li>上传Jar包</li><li>运行jar包</li></ul><p>那因此，我们打包镜像也是分成这么几步：</p><ul><li>准备Linux运行环境（<code>java</code>项目并不需要完整的操作系统，仅仅是基础运行环境即可）</li><li>安装并配置<code>JDK</code></li><li>拷贝jar包</li><li>配置启动脚本</li></ul><p>上述步骤中的每一次操作其实都是在生产一些文件（系统运行环境、函数库、配置最终都是磁盘文件），所以<strong>镜像就是一堆文件的集合</strong>。</p><p>镜像文件不是随意堆放的，而是按照操作的步骤分层叠加而成，每一层形成的文件都会单独打包并标记一个唯一id，称为<strong>Layer</strong>（<strong>层</strong>）。这样，如果我们构建时用到的某些层其他人已经制作过，就可以直接拷贝使用这些层，而不用重复制作。</p></blockquote><p>第一步中需要的<code>Linux</code>运行环境，通用性就很强，所以<code>Docker</code>官方就制作了这样的只包含<code>Linux</code>运行环境的镜像。我们在制作<code>java</code>镜像时，就无需重复制作，直接使用Docker官方提供的<code>CentOS</code>或<code>Ubuntu</code>镜像作为基础镜像。然后再搭建其它层即可，这样逐层搭建，最终整个<code>Java</code>项目的镜像结构如图所示</p><img src="/ProjectConstructionBlog/assets/image-20240626215155460.YcYEoKZO.png" alt="image-20240626215155460" style="zoom:80%;"><h4 id="dockerfile" tabindex="-1"><code>Dockerfile</code> <a class="header-anchor" href="#dockerfile" aria-label="Permalink to &quot;`Dockerfile`&quot;">​</a></h4><blockquote><p>由于制作镜像的过程中，需要逐层处理和打包，比较复杂，所以<code>Docker</code>就提供了自动打包镜像的功能。我们只需要将打包的过程，每一层要做的事情用固定的语法写下来，交给<code>Docker</code>去执行即可，而这种记录镜像结构的文件就称为**<code>Dockerfile</code>**</p><ul><li><p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noreferrer">https://docs.docker.com/engine/reference/builder/</a> ：对应语法参考文档，其中的语法比较多，比较常用的有：</p><div class="vp-table__container"><table><thead><tr><th style="text-align:left;"><strong>指令</strong></th><th style="text-align:left;"><strong>说明</strong></th><th style="text-align:left;"><strong>示例</strong></th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>FROM</code></strong></td><td style="text-align:left;">指定基础镜像</td><td style="text-align:left;"><code>FROM centos:6</code></td></tr><tr><td style="text-align:left;"><strong><code>ENV</code></strong></td><td style="text-align:left;">设置环境变量，可在后面指令使用</td><td style="text-align:left;"><code>ENV key value</code></td></tr><tr><td style="text-align:left;"><strong><code>COPY</code></strong></td><td style="text-align:left;">拷贝本地文件到镜像的指定目录</td><td style="text-align:left;"><code>COPY ./xx.jar /tmp/app.jar</code></td></tr><tr><td style="text-align:left;"><strong><code>RUN</code></strong></td><td style="text-align:left;">执行Linux的shell命令，一般是安装过程的命令</td><td style="text-align:left;"><code>RUN yum install gcc</code></td></tr><tr><td style="text-align:left;"><strong><code>EXPOSE</code></strong></td><td style="text-align:left;">指定容器运行时监听的端口，是给镜像使用者看的</td><td style="text-align:left;"><code>EXPOSE 8080</code></td></tr><tr><td style="text-align:left;"><strong><code>ENTRYPOINT</code></strong></td><td style="text-align:left;">镜像中应用的启动命令，容器运行时调用</td><td style="text-align:left;"><code>ENTRYPOINT java -jar xx.jar</code></td></tr></tbody></table></div></li></ul></blockquote><ul><li><p>例如，要基于<code>Ubuntu</code>镜像来构建一个Java应用，其<code>Dockerfile</code>内容如下</p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定基础镜像</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ubuntu:16.04</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置环境变量，JDK的安装目录、容器内时区</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_DIR=/usr/local</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拷贝jdk和java项目的包</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ./jdk8.tar.gz $JAVA_DIR/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ./docker-demo.jar /tmp/app.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设定时区</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装JDK</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cd $JAVA_DIR \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; tar -xf ./jdk8.tar.gz \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; mv ./jdk1.8.0_144 ./java8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置环境变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_HOME=$JAVA_DIR/java8</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH=$PATH:$JAVA_HOME/bin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定项目监听的端口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EXPOSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 入口，java项目的启动命令</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/app.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><blockquote><p>思考一下？</p><ul><li><p>以后会有很多很多<code>java</code>项目需要打包为镜像，他们都需要<code>Linux</code>系统环境、<code>JDK</code>环境这两层，只有上面的3层不同（因为jar包不同）。</p></li><li><p>如果每次制作<code>java</code>镜像都重复制作前两层镜像，是不是很麻烦</p></li></ul></blockquote><ul><li><p>所以，就有人提供了基础的系统加<code>JDK</code>环境，我们在此基础上制作<code>java</code>镜像，就可以省去<code>JDK</code>的配置了</p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基础镜像</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> openjdk:11.0-jre-buster</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设定时区</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拷贝jar包</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> docker-demo.jar /app.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 入口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/app.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><h4 id="构建镜像" tabindex="-1">构建镜像 <a class="header-anchor" href="#构建镜像" aria-label="Permalink to &quot;构建镜像&quot;">​</a></h4><blockquote><p>当<code>Dockerfile</code>文件写好以后，就可以利用命令来构建镜像了</p></blockquote><ul><li><p>首先，我们把一个<code>boot</code>项目打好的<code>jar</code>包和对应的<code>Dockerfile</code>文件拷贝到虚拟机的<code>/root/demo</code>目录下</p><p><code>Dockerfile</code>内容如下：</p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> openjdk:11.0-jre-buster</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hm-service.jar /app.jar</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/app.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li><li><p>查看/root/demo下文件</p><img src="/ProjectConstructionBlog/assets/image-20240626220303842.Op3ncZzV.png" alt="image-20240626220303842" style="zoom:50%;"></li><li><p>执行命令，构建镜像</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开始构建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-demo:1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><p>命令说明：</p><ul><li><code>docker build </code>: 就是构建一个docker镜像</li><li><code>-t docker-demo:1.0</code> ：<code>-t</code> 镜像名称:版本号</li><li><code>.</code> : 最后的点是指构建时<code>Dockerfile</code>所在路径，由于我们进入了<code>demo</code>目录，所以指定的是<code>.</code>代表当前目录，也可以直接指定<code>Dockerfile</code>目录： <ul><li><div class="language-Bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 直接指定Dockerfile目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-demo:1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/demo</span></span></code></pre></div></li></ul></li></ul></li></ul><img src="/ProjectConstructionBlog/assets/image-20240626221219650.CYYD_Mz2.png" alt="image-20240626221219650" style="zoom:50%;"><ul><li><p>查看镜像列表</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /images/docker</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626221309308.CwscaUmM.png" alt="image-20240626221309308" style="zoom:50%;"></li><li><p>运行该镜像</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.创建并运行容器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8082</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:8082</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-demo:1.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.查看容器 (我配置了别名，所以dps = docker ps)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3.浏览器访问</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">localhost:8080/hello/count</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 结果：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">5&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">欢迎访问黑马商城, 这是您第1次访问</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">5&gt;</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240626221644978.32e-mGAb.png" alt="image-20240626221644978" style="zoom:50%;"><ul><li><p>浏览器访问：<code>http://您的虚拟机ip地址:您的端口/您的接口路径</code></p><p><img src="/ProjectConstructionBlog/assets/image-20240626222015693.Hadm8ud1.png" alt="image-20240626222015693"></p></li></ul></li></ul><h3 id="网络" tabindex="-1">网络 <a class="header-anchor" href="#网络" aria-label="Permalink to &quot;网络&quot;">​</a></h3><blockquote><p><code>Java</code>项目往往需要访问其它各种中间件，例如<code>MySQL</code>、<code>Redis</code>等。现在，我们的容器之间能否互相访问呢？？？</p></blockquote><ul><li>查看下<code>MySQL</code>容器的详细信息，重点关注其中的网络<code>IP</code>地址（<strong>每个容器都有一个<code>ip</code>地址</strong>）</li></ul><ol><li><p>基本命令查找，寻找<code>Networks.bridge.IPAddress</code>属性</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627092908048.5r_CnMl3.png" alt="image-20240627092908048" style="zoom:80%;"><ul><li><p>也可以使用<code>format</code>过滤结果</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{range .NetworkSettings.Networks}}{{println .IPAddress}}{{end}}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627092954276.ePQALyoO.png" alt="image-20240627092954276" style="zoom:80%;"></li></ul></li><li><p>然后通过命令进入<code>dd</code>容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627093131965.I0JqZjz4.png" alt="image-20240627093131965" style="zoom:67%;"></li><li><p>在容器内，通过<code>ping</code>命令测试网络，可以发现互联</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.17</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0.3</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627093504027.XeoJl8L0.png" alt="image-20240627093504027" style="zoom:80%;"><ul><li><p>注意：<code>mysql</code>容器必须在启动中状态，不然<code>ping</code>的时候会报错如下：</p><img src="/ProjectConstructionBlog/assets/image-20240627093531702.DceOT7ZN.png" alt="image-20240627093531702" style="zoom:80%;"></li></ul></li></ol><blockquote><p>可能发生的问题？</p><ul><li>容器的网络<code>IP</code>其实是一个虚拟的<code>IP</code>，其值并不固定与某一个容器绑定，如果我们在开发时写死某个<code>IP</code>，而在部署时很可能<code>MySQL</code>容器的<code>IP</code>会发生变化，连接会失败</li></ul></blockquote><p>所以，<code>docker</code>的网络功能的出现就可以解决这个问题，常见命令有</p><div class="vp-table__container"><table><thead><tr><th style="text-align:left;"><strong>命令</strong></th><th style="text-align:left;"><strong>说明</strong></th><th style="text-align:left;"><strong>文档地址</strong></th></tr></thead><tbody><tr><td style="text-align:left;">docker network create</td><td style="text-align:left;">创建一个网络</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/network_create/" target="_blank" rel="noreferrer">docker network create</a></td></tr><tr><td style="text-align:left;">docker network ls</td><td style="text-align:left;">查看所有网络</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/network_ls/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker network rm</td><td style="text-align:left;">删除指定网络</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/network_rm/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker network prune</td><td style="text-align:left;">清除未使用的网络</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/network_prune/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker network connect</td><td style="text-align:left;">使指定容器连接加入某网络</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/network_connect/" target="_blank" rel="noreferrer">docs.docker.com</a></td></tr><tr><td style="text-align:left;">docker network disconnect</td><td style="text-align:left;">使指定容器连接离开某网络</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/network_disconnect/" target="_blank" rel="noreferrer">docker network disconnect</a></td></tr><tr><td style="text-align:left;">docker network inspect</td><td style="text-align:left;">查看网络详细信息</td><td style="text-align:left;"><a href="https://docs.docker.com/engine/reference/commandline/network_inspect/" target="_blank" rel="noreferrer">docker network inspect</a></td></tr></tbody></table></div><h4 id="自定义网络" tabindex="-1">自定义网络 <a class="header-anchor" href="#自定义网络" aria-label="Permalink to &quot;自定义网络&quot;">​</a></h4><ol><li><p>首先通过命令创建一个网络</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627093844437.V9rluBjX.png" alt="image-20240627093844437" style="zoom:80%;"></li><li><p>然后查看网络</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627093916616.ToXCbvqi.png" alt="image-20240627093916616" style="zoom:80%;"><ul><li>其中，除了<code>yjx</code>以外，其它都是默认的网络</li></ul></li><li><p>让<code>dd</code>和<code>mysql</code>容器都加入该网络</p><ul><li>加入网络时可以通过<code>--alias</code>给容器起别名，这样该网络内的其它容器可以用<strong>别名互相访问</strong>！</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定别名为db，另外每一个容器都有一个别名是容器名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># dd容器，也就是我们的java项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dd</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627094215890.zMdUqRVx.png" alt="image-20240627094215890" style="zoom:80%;"></li><li><p>进入<code>dd</code>容器，尝试利用别名访问<code>db</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 进入容器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 用db别名访问</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ping</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 用容器名访问</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627094314579.2qfqVfIp.png" alt="image-20240627094314579" style="zoom:80%;"><img src="/ProjectConstructionBlog/assets/image-20240627094409929.aRLlz-EN.png" alt="image-20240627094409929" style="zoom:80%;"></li></ol><blockquote><p><strong>现在无需记住<code>IP</code>地址也可以实现容器互联了</strong></p><p><strong>总结</strong></p><ul><li>在自定义网络中，可以给容器起多个别名，默认的别名是容器名本身</li><li>在同一个自定义网络中的容器，可以通过别名互相访问</li></ul></blockquote><h2 id="项目部署" tabindex="-1">项目部署 <a class="header-anchor" href="#项目部署" aria-label="Permalink to &quot;项目部署&quot;">​</a></h2><h3 id="部署java项目" tabindex="-1">部署Java项目 <a class="header-anchor" href="#部署java项目" aria-label="Permalink to &quot;部署Java项目&quot;">​</a></h3><ol><li><p>将您的<code>Dockerfile</code>和<code>jar</code>包一起上传到虚拟机的<code>root</code>目录</p><img src="/ProjectConstructionBlog/assets/image-20240627095137630.CbNQxlVn.png" alt="image-20240627095137630" style="zoom:80%;"></li><li><p>构建项目镜像，不指定<code>tag</code>，则默认为<code>latest</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjxx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627095351612.qXJwyuyj.png" alt="image-20240627095351612" style="zoom:80%;"></li><li><p>查看镜像</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /images/docker</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627095419810.bl3OTJcf.png" alt="image-20240627095419810" style="zoom:80%;"></li><li><p>创建并运行容器，并通过<code>--network</code>将其加入<code>yjx</code>网络，这样才能通过容器名访问<code>mysql</code></p><ul><li>我项目的配置文件</li></ul></li></ol><p><img src="/ProjectConstructionBlog/assets/image-20240627095634395.JMgdbxu9.png" alt="image-20240627095634395"></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8082</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:8082</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjxx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627095722518.dc4J_H2L.png" alt="image-20240627095722518" style="zoom:80%;"><ol start="5"><li>测试，通过浏览器访问：<code>http://你的虚拟机地址:你的端口/你的接口地址</code></li></ol><img src="/ProjectConstructionBlog/assets/image-20240627095824674.TRGMMbAH.png" alt="image-20240627095824674" style="zoom:50%;"><h3 id="部署前端" tabindex="-1">部署前端 <a class="header-anchor" href="#部署前端" aria-label="Permalink to &quot;部署前端&quot;">​</a></h3><blockquote><p>基于<code>nginx</code>部署</p></blockquote><ul><li><code>nginx</code>内容如下</li></ul><img src="/ProjectConstructionBlog/assets/image-20240627100023059.vfAfV8gG.png" alt="image-20240627100023059" style="zoom:80%;"><ul><li><code>nginx/html</code>内容如下，有两个前端项目</li></ul><img src="/ProjectConstructionBlog/assets/image-20240627100148067.UApbhCTE.png" alt="image-20240627100148067" style="zoom:67%;"><ul><li><p><code>nginx.conf</code>内容如下</p><img src="/ProjectConstructionBlog/assets/image-20240627103823987.hXdB-_Ml.png" alt="image-20240627103823987" style="zoom:80%;"></li></ul><ol><li><p>把整个<code>nginx</code>目录上传到虚拟机的<code>/root</code>目录下</p><img src="/ProjectConstructionBlog/assets/image-20240627102621252.yRkcQg1K.png" alt="image-20240627102621252" style="zoom:80%;"></li><li><p>创建<code>nginx</code>容器并完成两个挂载</p><ul><li>把<code>/root/nginx/nginx.conf</code>挂载到<code>/etc/nginx/nginx.conf</code></li><li>把<code>/root/nginx/html</code>挂载到<code>/usr/share/nginx/html</code></li></ul><blockquote><p>如下根据你自己的项目代理端口情况指定~</p></blockquote><ul><li>需要让<code>nginx</code>同时代理<code>hmall-portal</code>和<code>hmall-admin</code>两套前端资源，因此我们需要暴露两个端口： <ul><li>18080：对应<code>hmall-portal</code></li><li>18081：对应<code>hmall-admin</code></li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:18080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18081</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:18081</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/nginx/html:/usr/share/nginx/html</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/nginx/nginx.conf:/etc/nginx/nginx.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  nginx</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627103154602.PUVE3Qgx.png" alt="image-20240627103154602" style="zoom:80%;"></li></ol><ul><li><p>看下<code>nginx</code>容器有没有启动</p><img src="/ProjectConstructionBlog/assets/image-20240627103449942.s4uZ2uTF.png" alt="image-20240627103449942" style="zoom:80%;"></li><li><p>浏览器访问你前端项目地址测试：<code>http://你的虚拟机ip:您暴露的端口</code></p><img src="/ProjectConstructionBlog/assets/image-20240627103952450.sg-f5yrO.png" alt="image-20240627103952450" style="zoom:80%;"></li></ul><h3 id="dockercompose" tabindex="-1"><code>DockerCompose</code> <a class="header-anchor" href="#dockercompose" aria-label="Permalink to &quot;`DockerCompose`&quot;">​</a></h3><blockquote><p>部署一个简单的<code>java</code>项目，其中包含<code>3</code>个容器</p><ul><li><code>MySQL</code></li><li><code>Nginx</code></li><li><code>Java</code>项目</li></ul><p>稍微复杂的项目，其中还会有各种各样的其它中间件，需要部署的东西远不止3个。如果还像之前那样手动的逐一部署，就太麻烦了</p></blockquote><ul><li>Docker Compose就可以帮助我们实现<strong>多个相互关联的Docker容器的快速部署</strong></li><li>允许用户通过一个单独的 <code>docker-compose.yml </code>模板文件（<code>YAML</code> 格式）来定义一组相关联的应用容器</li></ul><h4 id="基本语法" tabindex="-1">基本语法 <a class="header-anchor" href="#基本语法" aria-label="Permalink to &quot;基本语法&quot;">​</a></h4><ul><li><code>docker-compose.yml</code>文件的基本语法可以参考官方文档 <ul><li><a href="https://docs.docker.com/compose/compose-file/legacy-versions/" target="_blank" rel="noreferrer">https://docs.docker.com/compose/compose-file/legacy-versions/</a></li></ul></li></ul><blockquote><p><code>docker-compose</code>文件中可以定义多个相互关联的应用容器，每一个应用容器被称为一个<strong>服务</strong>（service）</p><ul><li><p>用<code>docker run</code>部署<code>MySQL</code>的命令如下</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3306</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Asia/Shanghai</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysql/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysql/conf:/etc/mysql/conf.d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysql/init:/docker-entrypoint-initdb.d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mysql</span></span></code></pre></div></li><li><p>用<code>docker-compose.yml</code>文件来定义，就是这样：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">services:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mysql:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    container_name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;3306:3306&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    environment:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      TZ:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      MYSQL_ROOT_PASSWORD:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 123</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    volumes:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./mysql/conf:/etc/mysql/conf.d&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./mysql/data:/var/lib/mysql&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    networks:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">networks:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  new:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yjx</span></span></code></pre></div><div class="vp-table__container"><table><thead><tr><th style="text-align:left;"><strong>docker run 参数</strong></th><th style="text-align:left;"><strong>docker compose 指令</strong></th><th style="text-align:left;"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:left;">--name</td><td style="text-align:left;">container_name</td><td style="text-align:left;">容器名称</td></tr><tr><td style="text-align:left;">-p</td><td style="text-align:left;">ports</td><td style="text-align:left;">端口映射</td></tr><tr><td style="text-align:left;">-e</td><td style="text-align:left;">environment</td><td style="text-align:left;">环境变量</td></tr><tr><td style="text-align:left;">-v</td><td style="text-align:left;">volumes</td><td style="text-align:left;">数据卷配置</td></tr><tr><td style="text-align:left;">--network</td><td style="text-align:left;">networks</td><td style="text-align:left;">网络</td></tr></tbody></table></div></li></ul><p>跟着上面的例子，把我们对应项目的<code>docker-compose.yml</code>定义好</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 使用mysql镜像</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 指定容器名称 容器名为mysql</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3306:3306&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的3306端口映射到容器的3306端口</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      TZ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Asia/Shanghai</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 设置环境变量TZ为Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MYSQL_ROOT_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 设置环境变量MYSQL_ROOT_PASSWORD为123</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./mysql/conf:/etc/mysql/conf.d&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的./mysql/conf目录挂载到容器的/etc/mysql/conf.d目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./mysql/data:/var/lib/mysql&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的./mysql/data目录挂载到容器的/var/lib/mysql目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./mysql/init:/docker-entrypoint-initdb.d&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的./mysql/init目录挂载到容器的/docker-entrypoint-initdb.d目录</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yjx-net</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 加入yjx-net网络</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  yjx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 使用当前目录的Dockerfile构建镜像</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dockerfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dockerfile</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 使用名为Dockerfile的文件来构建Docker镜像</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yjx</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 容器名为yjx</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8082:8082&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 将主机的8082端口映射到容器的8082端口</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yjx-net</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 加入yjx-net网络</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    depends_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 依赖mysql服务</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  nginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nginx</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 使用nginx镜像</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nginx</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 容器名为nginx</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;18080:18080&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的18080端口映射到容器的18080端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;18081:18081&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的18081端口映射到容器的18081端口</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./nginx/nginx.conf:/etc/nginx/nginx.conf&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的./nginx/nginx.conf文件挂载到容器的/etc/nginx/nginx.conf文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./nginx/html:/usr/share/nginx/html&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 将主机的./nginx/html目录挂载到容器的/usr/share/nginx/html目录</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    depends_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yjx</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 依赖yjx服务</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yjx-net</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 加入yjx-net网络</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  yjx-net</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yjx</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 指定网络的名称</span></span></code></pre></div></blockquote><h4 id="基础命令" tabindex="-1">基础命令 <a class="header-anchor" href="#基础命令" aria-label="Permalink to &quot;基础命令&quot;">​</a></h4><ul><li>编写好<code>docker-compose.yml</code> 文件，就可以部署项目了，常见的命令看文档：<a href="https://docs.docker.com/compose/reference/" target="_blank" rel="noreferrer">https://docs.docker.com/compose/reference/</a></li></ul><p>基本语法如下：</p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker compose [OPTIONS] [COMMAND]</span></span></code></pre></div><ul><li><p><code>OPTIONS</code>和<code>COMMAND</code>都是可选参数，比较常见的有：</p><img src="/ProjectConstructionBlog/assets/image-20240627104334256.Q6vdHewc.png" alt="image-20240627104334256" style="zoom:80%;"></li></ul><h5 id="实战-3" tabindex="-1">实战 <a class="header-anchor" href="#实战-3" aria-label="Permalink to &quot;实战&quot;">​</a></h5><ol><li><p>进入<code>root</code>目录</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root</span></span></code></pre></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAa4AAAAzCAYAAADPeuyzAAAJs0lEQVR4nO2dsW7qSheF17n6HyC9GytJk/JoSjp0IqrwBENJkSa6He20dFc0FJTjJyCniSLRuXSdJoncTBkpTaR08xc2xoDBA8FgJ+s72pIPTMyabextz2xm//r796/9/fs3zs7OAADv7+/wPA+EEEJIHfnnz58/p9ZACCGEOPPPPn8ktYExiYVKHFrTcZE664sxBkbLBuiR0Mbg1FKrQqjQ7XhIDRMqiNXtqpEaxmh8zf0CKqzB942QBrJX4AIAxBN0PQ8tFR1Qzj4kF4DtAVRA6hBhFhBC6Hn7oAfP8+B5HgazowjeTt30ZLj4+TBEquXUf3F5Drw+I1rZbgTiBtd+jMl/wSlFHO2YEnJI9g9cjUFCmyluMcZdGhC6g0ec96c8YRuNwM21j9lDsLLdDOS/ffizMU5+30dIA6kmcGVDKRI6TJ9yQg2ZixNC6eInILi2SYbLjJmi7wN+f1o4vCT1EO3ZAK1ekN2NR4HCeAb41zc7DS25aIZQiz4bg1DLlc8QkEv7KWrjSs6/e/kQgJDQYW5oLtRQcnc/Hw2h0v4ketrD1e0dh/BKj9eKD0MNefn1Pty2Nzxt1ejcIaS2fH5+WmOM/fj4sB8fH9YYYwFsNamNNaGyYlMbqa0xoQ21tlKkrwlplRIWgBUqtMaEVmXvKRsaY8P0fdc2iQmrwqLX53+z2IeQ2obGWGNCq3W41gepjTVaFvbJSY/U1hhjtcz1QyqrZN43ymolF58rpFVh8edu1iOtNsaacOHfNX1OmkX22Ut6tLJy7TO3+Lki23Y8IPXi+OW3dzGH47XJh8boAh8dqF91OHdotDpbdYHLWC2L3i8+WYTKBxKXNtv3t9CRXmDSkze5SKUXbOfA5a554wVpm+V1OulJAteSnqx/u2gu2M9G++pFTlilQ2vSG4dQSyuyG4qV4F7a/7Qf6Xv57Z30lB6vLT7cN3Ct3EzV9tyh0WpsFc5xxXh5Knr9Chc+8Pq8PLgfPb8C/gWunNuUIy7PgfgFTwBwdQEfMzwEEYAI94/xDn1x11w+zyKglhJFDMywvYOWBUt6ome87qw5wMMsToeKQoQ6GSasZOZP3gAPd2niyR3GLx2Mpkn/Rx3gfsfpqasLH3H6Bctv77AHh+O1xYd74ja3dfpzh5A687/qdv2KZ048ryCgwin6mGDQVQjm/pEaZngaRUGvhQACUt7gsnON/nCKfmcAr3fgRIdAQWX/iRCoHgK1pX0hEtoMkYX59hSmn9+OMem26pvwIBRu28BsUOZbnjuEbOMEWYVPeImB88uVlIX805FTm3KW7jKfXhCjjY4UmGehVaG53dk2uZ3e5Y9zQWu+n4Oziw8jBIGC6rXQncRAu/PF3yhVRYCe58HrThBjhoHnwRvMsp9meN4uQcvleG3x4R6Im2v48QT7Z8Af79whpM6cIHAlw3R+f4Qs0UkojPo+4sf7NPPPpc1if8+vGzIEs2AFIFK4G8xwPpzCmBEuXteHCp9e0ov22o7cNKvxDGgPoXM7EFJBZdfG+cVy8UNZITVG/eIgulmPCy6aJZRWuf2nAb3wArfFz0dG3FzDnz0gwFd+v+VyvJI2RT7cHYl/+z5mY/WF35od8dwhpM5Ul5yxffJaqHmGX5rlVzBB7NIGgIVQVofzdssT7qValyyfQFA0we2gZ0VLmM/YAyyEXHlfWbHRX5v0JEkVyxP4Ra+VaxZyVe8WX23xcxW2KTlD6rkvkuSC4kQGRys7Xqs+DLWVqvz7vf5dLkqOqPe5Q6PV1ioJXLWyeQZhLr2Y1gjbmjbeKCu+qaDRaPvZ/kOFfh/TRqxVGEG1uhg8Arejb7TG4jdmvlbhnsmWNSSZmzt0vgshP5Vfn5+f9u3tjWVNCCGENIIfsFYhIYSQ7wQDFyGEkEZR4Q+QCakx1qHNr8pVEEL2gE9chBBCGgUDFyGEkEaxV+CS+hullUu9WOy2DvWInPQk9ZROLbUq5unwpcdDapgwXYUkv00I+dbs/8SVrg/XOvmKpi7lxwXk0orsucJ6QS9dsby8VPxRqJuejOOVeY9Uy6n/+eWe9l/6iRDSNH7AUKGENlPcYoy7NCB0B48470+b/7T4o0nWVUzKkuS3CSHfnWoCV43Kj0s9RHs2QKsXZHfjUaAwnu2+uKiL5vJS8AJyaT/F5eLdyPl3Lx8CEBI6zA3NhUlNrqXPqFOZd6HS/iR62sPVbV3Tle0JIQejukV2a1B+fKXarJDzhUdDq/X6oqelFXfL9DiUgodUVqvcQq5CbqzEW1YBOb/+4po+J82LKsBLerQqXvD3yNVyS0vcz49fftvVXP4dqZ80Gm03q3Co0MfrQ29RdyoKoFSE+bBOPLlb1E6KFO4mce4JyKWNA1cX8OdF+YTCaNjG66ALz7vDy/kupSncNKukSiB6uWJbUaCg8iNYgUJPLZ7+EAVpeY3da2DFj/9l/o3uHxHDx0VW4tZFc1IfLH55WtbTUzj8oFtS+Xn+5BdqCZEeyOVSIo574/wWIT+WCgPX6cuPLxXPu7qAjxkeggjzmkXuuGsun2dJLuD5oUKz52qyS3qiZywXlHfRHOBhFqfDfyFCnQwTVjLzJ2+Ah7s08eQO45cORtOk/6MOcL9jpLy68BGnX7D8NiHk+1PhyhksP76OgAqn6GOCQTdXBVlqmOFpFAW9FgIISHmDy841+sMp+p0BvEMvZR4oqOw/EQLVQ6C2tC9EQpshsjDfnsL089sxJt1dqiATQprICbIKj1d+fOnpIquGLJBV+q1A8/ZS8OlT2TgXtOb7OTi7+DBCECioXgvdSbzXsOVxSMqDeN0JYsww8Dx4g1n20wzPY9Ai5CdwgsB1xPLjWbBCMr8zmOF8OIUxI1y8rg8VPr2kF+21HblpLi8FPw9uix/KCqk3loLfrMcFF80SSqvc/tOAXnhzUJ8y7+LmGv7sAQE4v0XIj6S6rMJ6lB/frVqzsEqHizLuq2XuXfSUlYIXcuV9ZcVGf23SU1RRt7jKbplmIVf1bvHVkcu8b8oqlHruiyTTca/KwswqpNGaa5UErlpZmvKdSx2nNcO2psN/1Ri4aLTG2v5DhX4f00asVRhBtboYPAK3o2+0xuI3Zr5W4Z7JloSQb86vz89P+/b2hrOzMwDA+/s7PM87sSxCKsY6tGE9LkJqyQ9Yq5AQQsh3ghWQyc+ET1OENBY+cRFCCGkUDFyEEEIaBQMXIYSQRsHARQghpFEwcBFCCGkUDFyEEEIaBQMXIYSQRsHARQghpFEwcBFCCGkUDFyEEEIaBQMXIYSQRsHARQghpFEwcBFCCGkUDFyEEEIaxf8BkRzXvdSCqx4AAAAASUVORK5CYII=" alt="image-20240627105902837" style="zoom:80%;"></li><li><p>把编写好的<code>docker-compose.yml</code>放入<code>root</code>目录下</p><img src="/ProjectConstructionBlog/assets/image-20240627110255382.niDXMBY7.png" alt="image-20240627110255382" style="zoom:80%;"></li><li><p>删除之前的旧容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-qa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 删除所有正在运行和停止的Docker容器</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627110016000.yUhe4srk.png" alt="image-20240627110016000" style="zoom:80%;"></li><li><p>记得把之前的网络也删掉</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 网络名称</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627110851977.GxBBkqeC.png" alt="image-20240627110851977" style="zoom:80%;"></li><li><p>启动所有, <code>-d</code> 参数是后台启动</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627112031509.VTKAMwHz.png" alt="image-20240627112031509" style="zoom:67%;"></li><li><p>查看镜像</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /images/docker</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627112120386.t90-r-4Y.png" alt="image-20240627112120386" style="zoom:80%;"></li><li><p>查看容器</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span></span></code></pre></div><img src="/ProjectConstructionBlog/assets/image-20240627112157219.FwLYkQVC.png" alt="image-20240627112157219" style="zoom:80%;"></li><li><p>测试，打开浏览器访问：<code>http://您的虚拟机ip:您的端口</code></p><ul><li><p>后端服务访问成功</p><img src="/ProjectConstructionBlog/assets/image-20240627112306555.gR1DVsRj.png" alt="image-20240627112306555" style="zoom:80%;"></li><li><p>前端项目访问成功</p><img src="/ProjectConstructionBlog/assets/image-20240627112334123.tNRQ3ohq.png" alt="image-20240627112334123" style="zoom:67%;"></li></ul></li></ol></div></div></main><footer class="VPDocFooter" data-v-e03000ce data-v-725d36c2><!--[--><!--]--><div class="edit-info" data-v-725d36c2><!----><div class="last-updated" data-v-725d36c2><p class="VPLastUpdated" data-v-725d36c2 data-v-239af9bb>最后更新时间: <time datetime="2024-07-27T15:26:33.000Z" data-v-239af9bb></time></p></div></div><nav class="prev-next" data-v-725d36c2><div class="pager" data-v-725d36c2><!----></div><div class="pager" data-v-725d36c2><a class="VPLink link pager-link next" href="/ProjectConstructionBlog/docs/Mybatis3.html" data-v-725d36c2><!--[--><span class="desc" data-v-725d36c2>Next page</span><span class="title" data-v-725d36c2>Mybatis3</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"readme.md\":\"i_Zfo3pV\",\"index.md\":\"s7PyElQT\",\"docs_mybatis3.md\":\"iPHy37rx\",\"docs_docker.md\":\"CvS5TRpK\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"金金金的宝藏\",\"description\":\"A VitePress site\",\"base\":\"/ProjectConstructionBlog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"lastUpdatedText\":\"最后更新时间\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Yjx710\"}],\"nav\":[{\"text\":\"文档\",\"activeMatch\":\"/docs/\",\"link\":\"/docs/Docker\"}],\"sidebar\":{\"/docs/\":[{\"text\":\"Docker\",\"link\":\"/docs/Docker\"},{\"text\":\"Mybatis3\",\"link\":\"/docs/Mybatis3\"}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>